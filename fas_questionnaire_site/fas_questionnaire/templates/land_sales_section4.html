{% extends "container.html" %}
{% load static %}

{% block content %}

    {% if messages %}
        {% for message in messages %}
            {% ifequal message.message 'Data saved successfully' %}
                <div class="alert alert-success">
                    <strong>{{ message }}</strong>
                </div>
            {% endifequal %}
        {% endfor %}
    {% endif %}
    <form method='POST'>
        {% csrf_token %}
        <h4 class='text-center'>4. SALE AND PURCHASE OF AGRICULTURAL LAND</h4><br><br><br>

        <b>4.1 Land sold</b><br>
        <div class='row flex-row table-head landsale_formset_row'>
            <div class='col-md-1 table-cell  '>
                <label> Year Of sale</label>
            </div>
            <div class='col-md-1 table-cell long-div'>
                <label> Extent </label>
            </div>

            <div class='col-md-1 table-cell long-div'>
                <label> Type of Land </label>
            </div>

            <div class='col-md-4 table-cell long-div'>
                <div class='col-md-12 table-cell'>
                    <p class='text-center'>Buyer</p>
                </div>
                <div class='row flex-row'>
                    <div class='col-md-3 table-cell'>
                        <label> Name </label>
                    </div>
                    <div class='col-md-3 table-cell'>
                        <label> Caste </label>
                    </div>
                    <div class='col-md-3 table-cell'>
                        <label> Occupation </label>
                    </div>
                    <div class='col-md-3 table-cell'>
                        <label> Place of residence </label>
                    </div>
                </div>
            </div>

            <div class='col-md-1 table-cell long-div'>
            <label> Price of land </label>
            </div>

            <div class='col-md-1 table-cell long-div'>
            <label> Sale transaction number </label>
            </div>

            <div class='col-md-3 table-cell long-div'>
            <label>  Reason for sale </label>
            </div>
        </div>

        {{ landsold_formset.management_form }}
        {% for landsold_form in landsold_formset.forms %}
            <div class='row flex-row landsale_formset_row'>
                    {{ landsold_form.id }}
                <div class='col-md-1 table-cell'>
                    {{ landsold_form.year_of_sale }}
                </div>
                <div class='col-md-1 table-cell'>
                    {{ landsold_form.extent_of_land_sold }}
                </div>

                <div class='col-md-1 table-cell'>
                    {{ landsold_form.type_of_land_sold }}
                </div>

                <div class='col-md-4 table-cell'>
                    <div class='row flex-row'>
                        <div class='col-md-3 table-cell'>
                            {{ landsold_form.name_of_buyer }}
                        </div>
                        <div class='col-md-3 table-cell'>
                            {{ landsold_form.caste_of_buyer }}
                        </div>
                        <div class='col-md-3 table-cell'>
                            {{ landsold_form.occupation_of_buyer }}
                        </div>
                        <div class='col-md-3 table-cell'>
                            {{ landsold_form.place_of_residence_of_buyer }}
                        </div>
                    </div>
                </div>

                <div class='col-md-1 table-cell'>
                    {{ landsold_form.price_of_land_sold }}
                </div>

                <div class='col-md-1 table-cell'>
                    {{ landsold_form.sale_transaction_number }}
                </div>

                <div class='col-md-3 table-cell'>
                    {{ landsold_form.reasons_for_sale }}
                </div>
            </div>
        {% endfor %}

        <br>
        <br>

        <b>4.2 Land bought</b><br>
        <div class='row flex-row'>
            <div class='col-md-1 table-cell long-div'>
            <label> Year of purchase </label>
            </div>
            <div class='col-md-1 table-cell long-div'>
                <label> Extent </label>
            </div>

            <div class='col-md-1 table-cell long-div'>
                <label> Type of land </label>
            </div>

            <div class='col-md-4 table-cell long-div'>
                <div class='col-md-12 table-cell'>
                    <p class='text-center'>Seller</p>
                </div>
                <div class='row flex-row'>
                    <div class='col-md-3 table-cell'>
                    <label> Name </label>
                    </div>
                    <div class='col-md-3 table-cell'>
                        <label> Caste </label>
                    </div>
                    <div class='col-md-3 table-cell'>
                        <label> Occupations </label>
                    </div>
                    <div class='col-md-3 table-cell'>
                        <label> Place of residence </label>
                    </div>
                </div>
            </div>

            <div class='col-md-1 table-cell long-div'>
                <label> Price of land </label>
            </div>

            <div class='col-md-1 table-cell long-div'>
                <label> Purchased transaction number </label>
            </div>
        </div>

        {{ landpurchased_formset.management_form }}
        {% for landpurchased_form in landpurchased_formset.forms %}
            <div class='row flex-row landpurchased_formset_row'>
                {{ landpurchased_form.id }}
                <div class='col-md-1 table-cell'>
                    {{ landpurchased_form.year_of_purchase }}
                </div>
                <div class='col-md-1 table-cell'>
                    {{ landpurchased_form.extent_of_land_bought }}
                </div>

                <div class='col-md-1 table-cell'>
                    {{ landpurchased_form.type_of_land_purchased }}
                </div>

                <div class='col-md-4 table-cell'>
                    <div class='row flex-row'>
                        <div class='col-md-3 table-cell'>
                            {{ landpurchased_form.name_of_seller }}
                        </div>
                        <div class='col-md-3 table-cell'>
                            {{ landpurchased_form.caste_of_seller }}
                        </div>
                        <div class='col-md-3 table-cell'>
                            {{ landpurchased_form.occupation_of_seller }}
                        </div>
                        <div class='col-md-3 table-cell'>
                            {{ landpurchased_form.place_of_residence_of_seller }}
                        </div>
                    </div>
                </div>

                <div class='col-md-1 table-cell'>
                    {{ landpurchased_form.price_of_land_purchased }}
                </div>

                <div class='col-md-1 table-cell'>
                    {{ landpurchased_form.purchase_transaction_number }}
                </div>
            </div>
        {% endfor %}
        <div class="row">
            <label> Comments </label>
                {{  landpurchased_comments_form.landpurchased_comments }}
        </div>


        <div class='row text-center'>
            <button class='btn btn-primary btn-submit' type="submit">Save</button>
        </div>
    </form>
    <script src="{% static 'js/jquery.formset.js' %}"></script>
    <script type="text/javascript">

        $('.landsale_formset_row').formset({
            prefix:'{{ landsold_formset.prefix }}'
        });
    </script>

    <script type="text/javascript">
        $('.landpurchased_formset_row').formset({
            prefix:'{{ landpurchased_formset.prefix }}'
        });
    </script>
{% endblock %}
