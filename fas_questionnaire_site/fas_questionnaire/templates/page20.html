{% extends "container.html" %}
{% load static %}

{% block content %}
{% if messages %}
{% for message in messages %}
<div class="alert alert-success">
    <strong>{{ message }}</strong>
</div>
{% endfor %}
{% endif %}
<form method='POST' id="page_20_form">
    {% csrf_token %}
    <h4 class='text-center'>20. Indebtedness</h4><br><br><br>
    <br><br>
    <b>A. Outstanding loans</b><br>
    <div class='row flex-row'>
        <div class='col-md-1 table-cell flex-column'>
            <label>Loan No</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Month and year of borrowing</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Principal</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Collateral</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Rate of Interest</label>
        </div>
        <div class='col-md-3'>
            <div class='row'>
                <div class='col-md-12 table-cell'>
                    <label>Amount Outstanding</label>
                </div>
            </div>
            <div class= 'row'>
                <div class='col-md-4 table-cell'>
                    <label>Principal</label>
                </div>
                <div class='col-md-4 table-cell'>
                    <label>Interest</label>
                </div>
                <div class='col-md-4 table-cell'>
                    <label>Total</label>
                </div>
            </div>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Amount Repaid</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Source of Borrowing</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Purpose of Borrowing</label>
        </div>
    </div>


    {% csrf_token %}
    {{ formset_outstanding_loans_form }}
    {% for form in formset_outstanding_loans.forms %}
    <div class='row flex-row formset_outstanding_loans'>
        <div class='col-md-1 table-cell'>
            {{ form.loan_no }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.month_and_year_of_borrowing }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.principal }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.collateral }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.rate_of_interest }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.principal_amount_outstanding }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.interest_amount_outstanding }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.total_amount_outstanding }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.amount_repaid }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.source_of_borrowing }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.purpose_of_borrowing }}
        </div>
    </div>
    {% endfor %}

    <br><br>
    <b>B. Loans borrowed last year and repaid</b><br>
    <div class='row flex-row'>
        <div class='col-md-1 table-cell flex-column'>
            <label>Loan no</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Month of borrowing</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Principal</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Collateral</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Rate of interest</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Month when fully paid</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Total amount repaid</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Source of borrowing</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Purpose of borrowing</label>
        </div>
    </div>

    {% csrf_token %}
    {{ formset_loans_brwd_lst_yr_and_paid_form }}
    {% for form in formset_loans_brwd_lst_yr_and_paid.forms %}
    <div class='row flex-row formset_loans_brwd_lst_yr_and_paid'>
        <div class='col-md-1 table-cell'>
            {{ form.land_no }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.month_of_borrowing }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.principal }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.collateral }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.rate_of_interest }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.month_when_fully_repaid }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.total_amount_repaid }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.source_of_borrowing }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.purpose_of_borrowing }}
        </div>
    </div>
    {% endfor %}

    <br><br>
    <b>C. Membership in self-help groups(Record details of the most recent loan taken through SHG in 25A)</b><br>
    <div class='row flex-row'>
        <div class='col-md-1 table-cell flex-column'>
            <label>Name of member</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Name of Group/ Group leader</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Bank/ NGO to which the group is linked</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Number of members in the group</label>
        </div>
        <div class='col-md-3'>
            <div class='row'>
                <div class='col-md-12 table-cell'>
                    <label>Savings</label>
                </div>
            </div>
            <div class= 'row'>
                <div class='col-md-4 table-cell'>
                    <label>Rs. per week/ Month etc(specify)</label>
                </div>
                <div class='col-md-4 table-cell'>
                    <label>Total</label>
                </div>
            </div>
        </div>
    </div>
    {% csrf_token %}
    {{ formset_mem_shp_in_slf_hlp_grps_form }}
    {% for form in formset_mem_shp_in_slf_hlp_grps.forms %}
    <div class='row flex-row formset_mem_shp_in_slf_hlp_grps'>
        <div class='col-md-1 table-cell'>
            {{ form.name_of_member }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.name_of_group_group_leader }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.bank_ngo_to_which_the_group_is_linked }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.period_of_membership }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.number_of_members_in_the_group }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.rs_per_week_month_savings }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.total_savings }}
        </div>
    </div>
    {% endfor %}

    <br><br>
    <b>D. Details of bank/ post office of the household</b><br>
    <div class='row flex-row'>
        <div class='col-md-1 table-cell flex-column'>
            <label>Name/s of account holders</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Name of bank/post office</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Type of account</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Date of last transaction</label>
        </div>
        <div class='col-md-1 table-cell flex-column'>
            <label>Current balance</label>
        </div>
    </div>

    {% csrf_token %}
    {{ formset_dtls_of_bank_pst_offc_of_the_household_form }}
    {% for form in formset_dtls_of_bank_pst_offc_of_the_household.forms %}
    <div class='row flex-row formset_dtls_of_bank_pst_offc_of_the_household'>
        <div class='col-md-1 table-cell'>
            {{ form.name_of_account_holder }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.name_of_bank_post_office }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.type_of_account }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.date_of_last_transaction }}
        </div>
        <div class='col-md-1 table-cell'>
            {{ form.current_balanace }}
        </div>
    </div>
    {% endfor %}

    <div class='row text-center'>
        <button class='btn btn-primary btn-submit' type="submit">Save</button>
    </div>
</form>
<script src="{% static 'js/jquery.formset.js' %}"></script>
<script type="text/javascript">
    $('.formset_outstanding_loans').formset();
    $('.formset_loans_brwd_lst_yr_and_paid').formset();
    $('.formset_mem_shp_in_slf_hlp_grps').formset();
    $('.formset_dtls_of_bank_pst_offc_of_the_household').formset();
</script>
{% endblock %}
